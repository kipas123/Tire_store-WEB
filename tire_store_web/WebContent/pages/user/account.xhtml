<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core">
<!--<f:metadata>
    <f:viewAction action="#{loginCtrl.isInrole()}" />
</f:metadata> -->

<ui:composition template="/templates/offerlist-template.xhtml">
	<ui:define name="topic-name">
		<span style="color: white;">Manage your account</span>
	</ui:define>
	<ui:define name="insertContent">

	
        <div class="col-sm-6 offerView" style="opacity:0.9;padding:20px; text-align: justify;font-size:20px; border-radius: 10px 0px 0px 10px;">
	<h:form>

            <table class="table table-borderless">

                <tbody>
                <tr>
                    <td style="font-family: 'Oswald', sans-serif;">Username:</td>
                    <td>#{remoteClient.details.name}</td>
                </tr>

                </tbody>
            </table>
            <div class="col-sm-8 "> 
                <label for="id_password">Old password <span class="text-danger">*</span></label>
                <p:inputText id="id_password" type="password" name="password" value="#{accountManagement.pass}" class="form-control" required="true"
									requiredMessage="Podaj stare hasło!"></p:inputText>
            </div>
            <div class="col-sm-8">
                <label for="id_password_new">New password <span class="text-danger">*</span></label>
                <p:inputText id="id_password_new" type="password" name="password_new" value="#{accountManagement.newpass}" class="form-control" required="true"
									requiredMessage="Podaj nowe hasło!"
									validatorMessage="Hasło musi być posiadać cyfrę, duże, małe litery i zawierać conajmniej 8 znaków">
									<f:validateRegex
										pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$" /></p:inputText>
            </div>
            <div class="col-sm-8">
                <label for="id_confirmPass_new">Confirm password <span class="text-danger">*</span></label>
                <p:inputText id="id_confirmPass_new" type="password" name="confirmPass_new" value="#{accountManagement.confPass}" class="form-control" required="true"
									requiredMessage="Powtórz hasło!"></p:inputText>
            </div>
            <br></br>
             <div class="text-right" style="clear:both; margin-top: 12px; margin-right: 10px; ">
                 <p:commandButton value="Change password" id="ajax" update="msg"
								action="#{accountManagement.changePass()}" style="margin-right:20px;"
								styleClass="ui-priority-primary" />
                        </div> 
			<p:messages id="msg" />
			</h:form>
        </div>

        <div class="col-sm-6 offerView" style=" opacity:0.9; text-align: justify;font-size:20px; padding:20px; border-radius: 0px 10px 10px 10px;  ">

            <table class="table table-dark">
                <header style=" font-size: 30px;">Address:</header>
                <tbody>
                    <tr>
                        <td>Name:</td>
                        <td>#{remoteClient.details.name}</td>

                    </tr>
                    <tr>
                        <td>Surname</td>
                        <td>#{remoteClient.details.surname}</td>
                    </tr>
                    <tr>
                        <td>City:</td>
                        <td>#{remoteClient.details.city}</td>

                    </tr>
                    <tr>
                        <td>Street</td>
                        <td>#{remoteClient.details.street}</td>
                    </tr>
                    <tr>
                        <td>House number:</td>
                        <td>#{remoteClient.details.housenumber}</td>
                    </tr>
                <hr></hr>
                <tr>
                    <td>Zip code:</td>
                    <td> #{remoteClient.details.zipcode}</td>
                </tr>
                <tr>
                    <td>Phone number:</td>
                    <td><ui:fragment rendered="#{accountManagement.hasphoneNumber()}">#{remoteClient.details.phoneNumber}</ui:fragment></td>
                </tr>
                </tbody>
            </table>
            <div class="text-right" style="clear:both; margin-top: 12px; margin-right: 10px; ">
            <h:form>
                           <a href="{$conf->action_url}adressEditView" target="_blank">
                            <p:commandButton value="Change address"
								action="#{accountChangeAdress.addressPage()}" style="margin-bottom:1em;" />
                           </a>
                           </h:form>
                        </div> 
        </div>
	

	</ui:define>
</ui:composition>
</html>
